#!/bin/bash

set -e
set -u

# Ask for password upfront
sudo -v


#########################
##### HomeBrew ##########
#########################

which -s brew >/dev/null
if [[ "$?" != 0 ]] ; then
    bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"
fi

brew cask install iterm2
brew cask install visual-studio-code
brew cask install jira
brew cask install insomnia
brew cask install lepton
brew cask install zoom
brew cask install whatsapp
brew cask install spotify
brew cask install hiddenbar
brew cask install logitech-options
brew cask install slack


#########################
####### Global ##########
#########################

# Enable Dark Mode - Requires log out
defaults write "Apple Global Domain" AppleInterfaceStyle -string "Dark"


#########################
##### MacOS Dock ########
#########################
# Autohide
defaults write com.apple.dock autohide -bool true
defaults write com.apple.dock autohide-delay -float 0

# Minimize effect
defaults write com.apple.dock mineffect -string scale

# Size
defaults write com.apple.dock tilesize -int 32

# Minimize windows into their application’s icon
defaults write com.apple.dock minimize-to-application -bool true

# Don’t animate opening applications
defaults write com.apple.dock launchanim -bool false

# Top right screen corner -> Notification Center
defaults write com.apple.dock wvous-tr-corner -int 12
defaults write com.apple.dock wvous-tr-modifier -int 0


# Add Applications to Dock

# Iterm2
defaults write com.apple.dock persistent-apps -array-add '<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/iTerm.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>'

# Spotify
defaults write com.apple.dock persistent-apps -array-add '<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Spotify.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>'

# Visual Studio Code
defaults write com.apple.dock persistent-apps -array-add '<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Visual Studio Code.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>'


killall Dock

#########################
######### Safari ########
#########################

# Don’t send search queries to Apple
#defaults write com.apple.Safari UniversalSearchEnabled -bool false
#defaults write com.apple.Safari SuppressSearchSuggestions -bool true

# Show the full URL in the address bar
#defaults write com.apple.Safari ShowFullURLInSmartSearchField -bool true

# Prevent Safari from opening ‘safe’ files automatically after downloading
#defaults write com.apple.Safari AutoOpenSafeDownloads -bool false

# Enable Safari’s debug menu
#defaults write com.apple.Safari IncludeInternalDebugMenu -bool true

#########################
##### Apple Mail ########
#########################

# Disable send and reply animations in Mail.app
#defaults write com.apple.mail DisableReplyAnimations -bool true
#defaults write com.apple.mail DisableSendAnimations -bool true

# Copy email addresses as `foo@example.com` instead of `Foo Bar <foo@example.com>` in Mail.app
#defaults write com.apple.mail AddressesIncludeNameOnPasteboard -bool false

# Display emails in threaded mode, sorted by date
#defaults write com.apple.mail DraftsViewerAttributes -dict-add "DisplayInThreadedMode" -string "yes"
#defaults write com.apple.mail DraftsViewerAttributes -dict-add "SortedDescending" -string "yes"

# Disable inline attachments (just show the icons)
#defaults write com.apple.mail DisableInlineAttachmentViewing -bool true

#########################
#### Spotlight ##########
#########################
# TODO:
